(this["webpackJsonpreact_redux-list-of-todos"]=this["webpackJsonpreact_redux-list-of-todos"]||[]).push([[0],{25:function(t,e,s){},26:function(t,e,s){},28:function(t,e,s){},29:function(t,e,s){},30:function(t,e,s){},31:function(t,e,s){},32:function(t,e,s){"use strict";s.r(e);var c=s(1),n=s(8),o=s.n(n),r=s(2),i=s(5),a=s(14),u=s(13),d=s(3),l=s(7),j=s(4),b=function(t){return fetch("".concat("https://bloggy-api.herokuapp.com/").concat(t)).then((function(t){if(!t.ok)throw new Error;return t.json()}))},m={posts:[],selectedPost:0,handleEdit:!1};function O(t,e){var s=Object(j.a)(e,3),c=s[0],n=s[1],o=s[2],r=t.filter((function(t){return t.id!==c}));return[].concat(Object(l.a)(r),[{id:c,title:n,body:o}])}function p(t,e){var s=Object(j.a)(e,2),c=s[0],n=s[1],o=t.map((function(t){return t.id}));return{id:Math.max.apply(null,o)+1,title:c,body:n}}var h={comments:[]};function f(t,e){var s=Object(j.a)(e,2),c=s[0],n=s[1],o=t.map((function(t){return t.id}));return{id:Math.max.apply(null,o)+1,postId:c,body:n}}var x=Object(i.combineReducers)({reducerPost:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"postsSuccess":return Object(d.a)(Object(d.a)({},t),{},{posts:e.posts});case"addPost":return Object(d.a)(Object(d.a)({},t),{},{posts:[].concat(Object(l.a)(t.posts),[p(t.posts,e.post)])});case"deletePost":return Object(d.a)(Object(d.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!==e.postId}))});case"edit":return Object(d.a)(Object(d.a)({},t),{},{handleEdit:!t.handleEdit});case"editPost":return Object(d.a)(Object(d.a)({},t),{},{posts:O(t.posts,e.post)});case"change":return e.postId===t.selectedPost?Object(d.a)(Object(d.a)({},t),{},{selectedPost:0}):Object(d.a)(Object(d.a)({},t),{},{selectedPost:e.postId});default:return t}},reducerComments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"commentsSuccess":return Object(d.a)(Object(d.a)({},t),{},{comments:e.comments});case"addComment":return Object(d.a)(Object(d.a)({},t),{},{comments:[].concat(Object(l.a)(t.comments),[f(t.comments,e.comment)])});default:return t}}}),v=Object(i.createStore)(x,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(a.a))),_=(s(25),s(26),s(0)),P=function(){var t=Object(c.useState)(""),e=Object(j.a)(t,2),s=e[0],n=e[1],o=Object(r.c)((function(t){return t.reducerPost})).selectedPost,i=Object(r.b)();return Object(_.jsxs)("form",{className:"NewCommentForm",children:[Object(_.jsx)("div",{className:"form-field",children:Object(_.jsx)("textarea",{name:"body",value:s,required:!0,placeholder:"Type comment here",className:"NewCommentForm__input",onChange:function(t){return n(t.target.value)}})}),Object(_.jsx)("button",{type:"button",className:"NewCommentForm__submit-button button",onClick:function(){""!==s&&(i({type:"addComment",comment:[o,s]}),n(""))},children:"Add a comment"})]})},N=(s(28),function(){var t=Object(r.c)((function(t){return t.reducerPost})),e=t.posts,s=t.selectedPost,n=e.find((function(t){return t.id===s}))||null,o=Object(c.useState)((null===n||void 0===n?void 0:n.title)||""),i=Object(j.a)(o,2),a=i[0],u=i[1],d=Object(c.useState)((null===n||void 0===n?void 0:n.body)||""),l=Object(j.a)(d,2),b=l[0],m=l[1],O=Object(r.b)();return n&&Object(_.jsxs)("form",{className:"EditPostForm",children:[Object(_.jsx)("div",{className:"form-field",children:Object(_.jsx)("input",{type:"text",name:"title",value:a,className:"EditPostForm__input",onChange:function(t){return u(t.target.value)}})}),Object(_.jsx)("div",{className:"form-field",children:Object(_.jsx)("input",{type:"text",name:"body",value:b,className:"EditPostForm__input",onChange:function(t){return m(t.target.value)}})}),Object(_.jsx)("button",{type:"button",className:"EditPostForm__submit-button button",onClick:function(){O({type:"editPost",post:[s,a,b]})},children:"Add"})]})}),y=(s(29),function(){var t=Object(r.c)((function(t){return t.reducerPost})),e=t.posts,s=t.selectedPost,c=t.handleEdit,n=Object(r.c)((function(t){return t.reducerComments})).comments,o=e.find((function(t){return t.id===s}))||null,i=n.filter((function(t){return t.postId===s})),a=Object(r.b)();return Object(_.jsxs)("div",{className:"PostDetails",children:[Object(_.jsx)("h2",{children:null===o||void 0===o?void 0:o.title}),Object(_.jsx)("section",{className:"PostDetails__post",children:o&&(o.body?Object(_.jsx)("p",{children:o.body}):"There is no body in this Post")}),Object(_.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return a({type:"edit"})},children:"Edit post"}),c&&Object(_.jsx)(N,{}),Object(_.jsxs)("section",{className:"PostDetails__comments",children:[i.length?i.map((function(t){var e=t.body,s=t.id;return Object(_.jsxs)("li",{className:"PostDetails__list-item",children:[Object(_.jsx)("h4",{children:"Comment ID #".concat(s)}),Object(_.jsx)("p",{children:e})]},s)})):"There is no comment",Object(_.jsx)("ul",{className:"PostDetails__list"})]}),Object(_.jsxs)("section",{children:[Object(_.jsx)("h2",{children:"Add Comment"}),Object(_.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(_.jsx)(P,{})})]})]})}),C=(s(30),function(){var t=Object(r.c)((function(t){return t.reducerPost})),e=t.posts,s=t.selectedPost,c=Object(r.b)();return Object(_.jsxs)("div",{className:"PostsList",children:[Object(_.jsx)("h2",{children:"Posts:"}),Object(_.jsx)("ul",{className:"PostsList__list",children:e.map((function(t){var e=t.title,n=t.id;return Object(_.jsxs)("li",{className:"PostsList__item",children:[Object(_.jsx)("h4",{children:e}),Object(_.jsxs)("div",{className:"PostsList__buttons",children:[Object(_.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return c({type:"change",postId:n})},children:s===n?"Close":"Open"}),Object(_.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return c({type:"deletePost",postId:n})},children:"Delete"})]})]},n)}))})]})}),g=(s(31),function(){var t=Object(c.useState)(""),e=Object(j.a)(t,2),s=e[0],n=e[1],o=Object(c.useState)(""),i=Object(j.a)(o,2),a=i[0],u=i[1],d=Object(r.b)();return Object(_.jsxs)("form",{className:"NewPostForm",children:[Object(_.jsx)("div",{className:"form-field",children:Object(_.jsx)("input",{type:"text",name:"title",value:s,required:!0,placeholder:"Your title",className:"NewPostForm__input",onChange:function(t){return n(t.target.value)}})}),Object(_.jsx)("div",{className:"form-field",children:Object(_.jsx)("input",{type:"text",name:"body",value:a,required:!0,placeholder:"Your body",className:"NewPostForm__input",onChange:function(t){return u(t.target.value)}})}),Object(_.jsx)("button",{type:"submit",className:"NewPostForm__submit-button button",onClick:function(){""!==a&&""!==s&&(d({type:"addPost",post:[s,a]}),u(""),n(""))},children:"Add"})]})}),w=function(){var t=Object(r.c)((function(t){return t.reducerPost})).selectedPost,e=Object(r.b)();return Object(c.useEffect)((function(){e((function(t){return b("posts").then((function(e){return t({type:"postsSuccess",posts:e})}))}))}),[]),Object(c.useEffect)((function(){e((function(t){return b("comments").then((function(e){return t({type:"commentsSuccess",comments:e})}))}))}),[]),Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)("header",{className:"App__header",children:Object(_.jsx)("h2",{children:"List of Posts"})}),Object(_.jsxs)("main",{className:"App__main",children:[Object(_.jsx)("div",{className:"App__sidebar",children:Object(_.jsx)(C,{})}),Object(_.jsxs)("div",{className:"App__content",children:[Object(_.jsx)("h2",{children:"Create new Post"}),Object(_.jsx)(g,{}),t?Object(_.jsx)(y,{}):Object(_.jsx)("h2",{children:"Open Post details"})]})]})]})})},E=function(){return Object(_.jsx)(r.a,{store:v,children:Object(_.jsx)(w,{})})};o.a.render(Object(_.jsx)(E,{}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.5e116745.chunk.js.map